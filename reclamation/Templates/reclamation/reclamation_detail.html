{% extends "index.html" %}
{% block content %}
<div class="container mt-5">
    <h1>Reclamation Details</h1>
    <p><strong>Type:</strong> {{ reclamation.title }}</p>
    <p><strong>Description:</strong> {{ reclamation.description }}</p>
    <p><strong>Created at:</strong> {{ reclamation.created_at }}</p>

    <a href="{% url 'reclamation-update' reclamation.pk %}" class="btn btn-secondary">Edit</a>
    <a href="{% url 'reclamation-delete' reclamation.pk %}" class="btn btn-danger">Delete</a>
    <a href="{% url 'reclamation-list' %}" class="btn btn-info">Back to List</a>

    <!-- Show Responses and Add Response Buttons -->
    <button class="btn btn-primary mt-3" id="show-responses-btn">Show Responses</button>
    <a href="{% url 'response-add' reclamation.pk %}" class="btn btn-success mt-3">Add Response</a>

    <!-- Responses List -->
    <div id="responses-list" class="mt-4" style="display: none;">
        <h2>Responses</h2>
        {% if responses %}
            <ul class="list-group">
                {% for response in responses %}
                    <li class="list-group-item">
                        <p><strong>{{ response.user.username }}:</strong> {{ response.content }}</p>
                        <small>{{ response.created_at }}</small>
                        <a href="{% url 'response-delete' response.pk %}" class="btn btn-danger btn-sm" 
                        onclick="return confirm('Are you sure you want to delete this response?');">Delete</a>
                    </li>
                {% endfor %}
            </ul>
        {% else %}
            <p>No responses yet.</p>
        {% endif %}
    </div>
</div>

<script>
    document.getElementById("show-responses-btn").onclick = function() {
        var responsesList = document.getElementById("responses-list");
        responsesList.style.display = responsesList.style.display === "none" ? "block" : "none";
    }
</script>
{% endblock %}
    